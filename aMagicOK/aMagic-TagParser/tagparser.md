# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∫–ª–∞—Å—Å–∞ `TagParser`

- 09.04.2025 –∞–≤—Ç–æ—Ä –ê–ª–µ–∫—Å–µ–π –ù–µ—á–∞–µ–≤, –≥. –ú–æ—Å–∫–≤–∞, +7(999)003-90-23, nechaev72@list.ru

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
3. [–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–±–∞–∑–æ–≤–æ–µ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
4. [–°–∏–Ω—Ç–∞–∫—Å–∏—Å](#—Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
5. [–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
6. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
7. [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)
8. [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](#–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
9. [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –í–≤–µ–¥–µ–Ω–∏–µ <a name="–≤–≤–µ–¥–µ–Ω–∏–µ"></a>
`TagParser` ‚Äî —ç—Ç–æ PHP-–∫–ª–∞—Å—Å –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (–≤ —Å—Ç–∏–ª–µ CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤) –≤ –≤–∞–ª–∏–¥–Ω—ã–π HTML. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ **–æ—Ç—Å—Ç—É–ø—ã** (2 –ø—Ä–æ–±–µ–ª–∞ –∏–ª–∏ 1 —Ç–∞–±)
- CSS-–∫–ª–∞—Å—Å—ã, ID, –∞—Ç—Ä–∏–±—É—Ç—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Ç–µ–≥–æ–≤
- Void-—ç–ª–µ–º–µ–Ω—Ç—ã (`<img>`, `<input>` –∏ –¥—Ä.)

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ <a name="—É—Å—Ç–∞–Ω–æ–≤–∫–∞"></a>
–ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª–∞—Å—Å –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç:
```php
require_once 'TagParser.php';
```

---

## –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ <a name="–±–∞–∑–æ–≤–æ–µ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ"></a>
```php
$input = "
ul.menu#main
  li.item –ü—É–Ω–∫—Ç 1
  li.item.active –ü—É–Ω–∫—Ç 2
";

$parser = new TagParser();
echo $parser->parse($input);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```html
<ul id="main" class="menu">
  <li class="item">–ü—É–Ω–∫—Ç 1</li>
  <li class="item active">–ü—É–Ω–∫—Ç 2</li>
</ul>
```

---

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å <a name="—Å–∏–Ω—Ç–∞–∫—Å–∏—Å"></a>
### –°—Ç—Ä–æ–∫–∞ —à–∞–±–ª–æ–Ω–∞
```
[–æ—Ç—Å—Ç—É–ø—ã][—Ç–µ–≥][#id][.class][[–∞—Ç—Ä–∏–±—É—Ç—ã]][ —Ç–µ–∫—Å—Ç]
```
#### –ü—Ä–∏–º–µ—Ä
```
div#header.container[data-role='main'] –ó–∞–≥–æ–ª–æ–≤–æ–∫
    ^^     ^         ^              ^
    |      |         |              |
    –æ—Ç—Å—Ç—É–ø—ã       –∞—Ç—Ä–∏–±—É—Ç—ã       —Ç–µ–∫—Å—Ç
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
| –≠–ª–µ–º–µ–Ω—Ç       | –ü—Ä–∏–º–µ—Ä              | –†–µ–∑—É–ª—å—Ç–∞—Ç                     |
|---------------|---------------------|-------------------------------|
| –¢–µ–≥           | `div`               | `<div>`                       |
| ID            | `#main`             | `id="main"`                   |
| –ö–ª–∞—Å—Å—ã        | `.btn.large`        | `class="btn large"`           |
| –ê—Ç—Ä–∏–±—É—Ç—ã      | `[data-id='5']`     | `data-id="5"`                 |
| –¢–µ–∫—Å—Ç         | `–¢–µ–∫—Å—Ç`             | `>–¢–µ–∫—Å—Ç</tag>`                |
| Void-—ç–ª–µ–º–µ–Ω—Ç—ã | `img[src='pic.jpg']`| `<img src="pic.jpg">`         |

---

## –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ <a name="—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏"></a>
### 1. –°–º–µ—à–∞–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã
```php
$input = "
ul
\tli (—Ç–∞–±)
  \tli (—Ç–∞–± + 2 –ø—Ä–æ–±–µ–ª–∞)
";
```
**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:** –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ç–∞–±–æ–≤ ( `\t` ) –∏ –ø—Ä–æ–±–µ–ª–æ–≤.

### 2. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å
```php
$input = "
div
  div
    p –¢–µ–∫—Å—Ç
";
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```html
<div>
  <div>
    <p>–¢–µ–∫—Å—Ç</p>
  </div>
</div>
```

### 3. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
```php
$input = "input[type='email' required]";
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```html
<input type="email" required>
```

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ <a name="–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫"></a>
–ö–ª–∞—Å—Å –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ —Å–ª—É—á–∞—è—Ö:
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–ø—É—Å–∫ —É—Ä–æ–≤–Ω—è)
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `attr='value`)

**–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```php
try {
    $parser->parse($input);
} catch (TagParserException $e) {
    echo "–û—à–∏–±–∫–∞: " . $e->getMessage();
}
```

---

## –ü—Ä–∏–º–µ—Ä—ã <a name="–ø—Ä–∏–º–µ—Ä—ã"></a>
### –ü—Ä–∏–º–µ—Ä 1: –§–æ—Ä–º–∞
```php
$input = "
form#login[action='/auth']
  input[type='text' name='login']
  input[type='password' name='pass']
  button.btn[type='submit'] –í–æ–π—Ç–∏
";

echo $parser->parse($input);
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```html
<form id="login" action="/auth">
  <input type="text" name="login">
  <input type="password" name="pass">
  <button class="btn" type="submit">–í–æ–π—Ç–∏</button>
</form>
```

### –ü—Ä–∏–º–µ—Ä 2: –ú–µ–¥–∏–∞-–æ–±—ä–µ–∫—Ç
```php
$input = "
div.media
  img.thumb[src='avatar.jpg']
  div.content
    h3 –ó–∞–≥–æ–ª–æ–≤–æ–∫
    p –¢–µ–∫—Å—Ç
";
```

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è <a name="–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è"></a>
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–∞–º–æ–∑–∞–∫—Ä—ã–≤–∞—é—â–∏—Ö—Å—è —Ç–µ–≥–æ–≤ (–∫—Ä–æ–º–µ void-—ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `:` –≤ –∏–º–µ–Ω–∞—Ö –∫–ª–∞—Å—Å–æ–≤/ID
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏: 20 —É—Ä–æ–≤–Ω–µ–π

---

## –õ–∏—Ü–µ–Ω–∑–∏—è <a name="–ª–∏—Ü–µ–Ω–∑–∏—è"></a>
MIT License. –°–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è.

---

# –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è `TagParser`

## –°–ª–∞–π–¥ 1: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ ‚Üí HTML
- üåÄ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –æ—Ç—Å—Ç—É–ø—ã
- ‚ö° –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ void-—ç–ª–µ–º–µ–Ω—Ç–æ–≤
- üîß –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

## –°–ª–∞–π–¥ 2: –°–∏–Ω—Ç–∞–∫—Å–∏—Å
```css
div#header.main[data-role='banner']
  ul.nav
    li –î–æ–º–æ–π
    li –û –Ω–∞—Å
```

## –°–ª–∞–π–¥ 3: –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞
```html
<div id="header" class="main" data-role="banner">
  <ul class="nav">
    <li>–î–æ–º–æ–π</li>
    <li>–û –Ω–∞—Å</li>
  </ul>
</div>
```

## –°–ª–∞–π–¥ 4: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤
```
–î–æ–ø—É—Å—Ç–∏–º—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
‚Ä¢ 2 –ø—Ä–æ–±–µ–ª–∞
‚Ä¢ 1 —Ç–∞–±
‚Ä¢ –°–º–µ—à–∞–Ω–Ω—ã–µ (—Ç–∞–± + –ø—Ä–æ–±–µ–ª—ã)
```

## –°–ª–∞–π–¥ 5: –ò—Ç–æ–≥–∏
- –£—Å–∫–æ—Ä—è–µ—Ç –≤–µ—Ä—Å—Ç–∫—É –≤ 3 —Ä–∞–∑–∞ üöÄ
- –ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
- –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è

---

[GitHub Repository](https://github.com/yourname/tagparser) | [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è) | [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)