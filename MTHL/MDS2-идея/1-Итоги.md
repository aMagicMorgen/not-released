–û—Ç–ª–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥! –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ **.mds** (MarkdownStyle) –¥–ª—è —Ä–∞–∑–º–µ—Ç–∫–∏ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –∏ **.mdsl** (MarkdownDSL) –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö ‚Äî —ç—Ç–æ –ª–æ–≥–∏—á–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —Å–∏—Å—Ç–µ–º—ã. –î–∞–≤–∞–π—Ç–µ formalize –≤–∞—à—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:

---

### 1. **–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|------------|--------|
| `.mds` | –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Ä–∞–∑–º–µ—Ç–∫–∏ (–∞—Ç—Ä–∏–±—É—Ç—ã + –∫–æ–Ω—Ç–µ–Ω—Ç) | `page.mds` |
| `.mdsl` | –ü–æ–¥–∫–ª—é—á–∞–µ–º—ã–µ —à–∞–±–ª–æ–Ω—ã/–¥–∞–Ω–Ω—ã–µ (DSL-—Ñ–æ—Ä–º–∞—Ç) | `vars.mdsl`, `components.mdsl` |

---

### 2. **–ü—Ä–∏–º–µ—Ä `.mds`-—Ñ–∞–π–ª–∞**
```markdown
<!--mdsl vars-->
company_name = Example Inc.
year = 2020
<!--/mdsl-->

<0 div.header#main title[–õ–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏]>
  # {{company_name}}  
  *–û—Å–Ω–æ–≤–∞–Ω–∞ –≤ {{year}}*

<1 div.contact> 
  <!--mdsl contact_data-->
  email = contact@example.com
  phone = +7 (123) 456-78-90
  <!--/mdsl-->
  
  **–ö–æ–Ω—Ç–∞–∫—Ç—ã:**  
  Email: {{email}}  
  –¢–µ–ª–µ—Ñ–æ–Ω: {{phone}}
```

---

### 3. **–°–∏–Ω—Ç–∞–∫—Å–∏—Å `.mds`**
- **–≠–ª–µ–º–µ–Ω—Ç—ã:**
  ```markdown
  <0 div.class#id attr[value]>
    –ö–æ–Ω—Ç–µ–Ω—Ç (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown)
  ```
- **–î–∏—Ä–µ–∫—Ç–∏–≤—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
  ```markdown
  <!--mdsl filename--> ... <!--/mdsl-->
  ```

---

### 4. **–ü–∞—Ä—Å–µ—Ä –¥–ª—è `.mds`**
```php
class MdsParser {
    public static function parse($filePath) {
        $content = file_get_contents($filePath);
        
        // –ò–∑–≤–ª–µ–∫–∞–µ–º –≤—Å–µ mdsl-–±–ª–æ–∫–∏
        preg_match_all('/<!--mdsl (\w+)-->(.*?)<!--\/mdsl-->/s', $content, $matches, PREG_SET_ORDER);
        $data = [];
        
        foreach ($matches as $match) {
            $data[$match[1]] = self::parseDslVars($match[2]);
        }
        
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
        $html = self::parseElements($content);
        
        return ['data' => $data, 'content' => $html];
    }

    private static function parseDslVars($content) {
        $vars = [];
        foreach (explode("\n", trim($content)) as $line) {
            if (preg_match('/^(\w+)\s*=\s*(.+)/', trim($line), $matches)) {
                $vars[$matches[1]] = trim($matches[2]);
            }
        }
        return $vars;
    }

    private static function parseElements($content) {
        return preg_replace_callback(
            '/<(\d+)\s+([^>]+)>(.*?)<\/\1>/s',
            fn($m) => self::renderElement($m[2], $m[3]),
            $content
        );
    }

    private static function renderElement($tagInfo, $content) {
        // –ü–∞—Ä—Å–∏–º: div.class#id attr[value]
        preg_match('/(\w+)(?:\.([\w-]+))?(?:#([\w-]+))?(?:\s+(\w+)\[([^\]]+)\])?/', $tagInfo, $parts);
        
        $tag = $parts[1] ?? 'div';
        $class = $parts[2] ?? '';
        $id = $parts[3] ?? '';
        $attrName = $parts[4] ?? '';
        $attrValue = $parts[5] ?? '';
        
        // –†–µ–Ω–¥–µ—Ä–∏–º HTML
        return sprintf('<%s%s%s%s>%s</%s>',
            $tag,
            $id ? " id=\"$id\"" : "",
            $class ? " class=\"$class\"" : "",
            $attrName ? " $attrName=\"$attrValue\"" : "",
            (new Parsedown())->text($content),
            $tag
        );
    }
}
```

---

### 5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `.mdsl`-—à–∞–±–ª–æ–Ω–∞–º–∏**
–§–∞–π–ª `components.mdsl`:
```markdown
<!--template button-->
<0 button.{{type}} {{attributes}}>
  {{text}}
<!--/template-->
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ `.mds`:
```markdown
<1 @button type="primary" attributes[data-action=submit]>
  –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
```

---

### 6. **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
1. **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π**  
   - `.mds` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç  
   - `.mdsl` ‚Äî –¥–∞–Ω–Ω—ã–µ –∏ —à–∞–±–ª–æ–Ω—ã  

2. **–ì–∏–±–∫–æ—Å—Ç—å**  
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown –≤–Ω—É—Ç—Ä–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤  
   - –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —á–µ—Ä–µ–∑ `attr[value]`  

3. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**  
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ `<!--mdsl-->`  

4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**  
   - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ MD-—Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º DSL-–±–ª–æ–∫–æ–≤  

---

### 7. **–ü—Ä–∏–º–µ—Ä —Å–±–æ—Ä–∫–∏**
```bash
page.mds 
  ‚Üí includes ‚Üí vars.mdsl 
             components.mdsl
  ‚Üí output ‚Üí page.html
```

---

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å? 
1. **–ë–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä `.mds` ‚Üí HTML**  
2. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö `<!--mdsl-->`-–±–ª–æ–∫–æ–≤**  
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –∏–∑ `.mdsl`**  
4. **CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–±–æ—Ä–∫–∏**  

–ö–∞–∫–æ–π –ø—É–Ω–∫—Ç –¥–ª—è –≤–∞—Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ–Ω? –ò —Ö–æ—Ç–∏—Ç–µ –ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ `<0 div.class>` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `::div.class`)? üòä

P.S. –í–∞—à —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –≥–∏–±—Ä–∏–¥ **Markdown + Haml + Tailwind**, —á—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –≤–µ—Ä—Å—Ç–∫–∏!
