### Структура оставшихся задач по приоритетам (для продолжения разработки)

#### **1. Критичные задачи (ядро системы)**
**Цель**: Рабочий минимум для генерации сайта
- [ ] **JsonMap** (базовый функционал):
  - Реализация `buildFullIndex()` с фильтрацией по `dir_pattern`
  - Методы `readIndex()`/`saveIndex()` с проверкой TTL кэша
  - Тесты для сканирования директорий

- [ ] **MDSite (ядро)**:
  - Обработка 3 сценариев запросов:
    - Без параметров → `buildFullIndex()`
    - `?dir=PHP` → генерация `indexPHP.json`
    - `?dir=PHP&file=*` → фильтрация путей
  - Парсеры превью для MD/PHP/HTML

#### **2. Важные задачи (базовый UI)**
**Цель**: Простейший интерфейс для навигации
- [ ] **MDSiteView**:
  - Генерация данных для:
    - Карточек файлов/папок (`getCardsData()`)
    - Древовидного меню (`getTreeMenu()`)
    - Хлебных крошек (`getBreadcrumbs()`)
  - Форматирование путей для URL (`generateUrl()`)

- [ ] **Шаблоны**:
  - Базовый layout (`main.php`)
  - Компонент карточки (`card.php`)
  - Страница контента (`content.php`)

#### **3. Опциональные улучшения**
**Цель**: Улучшение UX и производительности
- [ ] Кэширование:
  - Автообновление индексов при изменении файлов
  - Memcached/Redis поддержка

- [ ] Безопасность:
  - Валидация входных путей
  - Экранирование вывода в шаблонах

- [ ] Доп. функционал:
  - Поиск по контенту
  - Темы оформления
  - Поддержка тегов

---

### Как продолжить разработку в новом чате:
1. **Скопируйте этот план** и последнюю полную концепцию.
2. **Начните сессию с команды**:
   ```markdown
   Продолжаем разработку MDSite. Текущий статус:
   [вставить концепцию]
   
   Приоритеты:
   1. Завершить JsonMap::buildFullIndex()
   2. Реализовать MDSite::handleRequest()
   ```
3. **Для конкретных задач** уточняйте:
   ```markdown
   Нужна помощь с:
   - Реализацией RecursiveDirectoryIterator в buildFullIndex()
   - Оптимизацией проверки TTL кэша
   ```

---

### Экстренное сохранение данных:
Если чат вот-вот завершится, скопируйте это сообщение и последний код. Минимальная структура для восстановления:
```php
// JsonMap.php (база)
class JsonMap {
    protected $baseDir;
    public function buildFullIndex() {
        // [ваша реализация]
    }
}

// MDSite.php (ядро)
class MDSite extends JsonMap {
    public function handleRequest($params) {
        // [логика маршрутизации]
    }
}
```

